<!DOCTYPE html>

<html lang="en">

<head>

  <meta charset="utf-8" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Builder Portal – PorchMe</title>

  <link rel="stylesheet" href="style.css?v=9" />

</head>

<body>

  <div class="topline"></div>



  <nav class="nav">

    <div class="wrap">

      <a class="brand" href="index.html">

        <img src="image/porchme_logo_silver.png" class="royal-logo" alt="PorchMe" />

      </a>

      <button class="nav-toggle" aria-label="Menu">☰</button>

      <div class="nav-links">

        <a class="navlink" href="index.html#expertise">Design Expertise</a>

        <a class="navlink" href="gallery.html">Gallery</a>

        <a class="btn btn-gold" href="book.html">Book a Visit</a>

      </div>

    </div>

  </nav>



  <section class="section">

    <div class="wrap">

      <div class="card">

        <h2>Builder Portal</h2>

        <p class="muted">Complete the form to join our builder network.</p>

        <form id="builder-form" class="form form--grid" autocomplete="on" novalidate>

          <input type="text" name="company_url" autocomplete="off" tabindex="-1" class="honeypot" />



          <div class="form__item">

            <label class="form__label">Full Name <span class="req">*</span></label>

            <input class="form__control" name="fullName" required />

          </div>



          <div class="form__item">

            <label class="form__label">Company</label>

            <input class="form__control" name="company" />

          </div>



          <div class="form__item">

            <label class="form__label">Email <span class="req">*</span></label>

            <input class="form__control" type="email" name="email" required />

          </div>



          <div class="form__item">

            <label class="form__label">Phone <span class="req">*</span></label>

            <input class="form__control" type="tel" name="phone" required />

          </div>



          <div class="form__item">

            <label class="form__label">City</label>

            <input class="form__control" name="city" />

          </div>



          <div class="form__item">

            <label class="form__label">State</label>

            <input class="form__control" name="state" />

          </div>



          <div class="form__item">

            <label class="form__label">ZIP Code</label>

            <input class="form__control" name="zip" />

          </div>



          <div class="form__item">

            <label class="form__label">Years of Experience</label>

            <input class="form__control" name="years" />

          </div>



          <div class="form__item form__item--span">

            <label class="form__label">Notes</label>

            <textarea class="form__control" name="notes" rows="3"></textarea>

          </div>



          <label class="check form__item--span">

            <input type="checkbox" id="licensed" name="licensed" required />

            <span>I confirm I’m a licensed/insured contractor.</span>

          </label>



          <div class="actions form__item--span">

            <button id="submitBtn" class="btn btn-gold" type="submit" disabled>Request Onboarding</button>

            <button class="btn btn-quiet" type="reset">Clear</button>

          </div>



          <p id="builder-success" class="status muted hidden"></p>

        </form>

      </div>

    </div>

  </section>



  <footer class="footer">

    <div class="wrap">

      <div class="fbrand">

        <img src="image/porchme_logo_silver.png" alt="PorchMe" />

        <strong>PorchMe</strong>

      </div>

      <div class="copy">© 2025 PorchMe. All rights reserved.</div>

    </div>

  </footer>



  <script>

    const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxL9sAVFSFMwz675dd7UN1w3IlzxWaE71oWsbe8WLjmrvv_5zaOEBk1JDe-5rW-NPI/exec';



    const formEl = document.getElementById('builder-form');

    const statusEl = document.getElementById('builder-success');

    const submitBtn = document.getElementById('submitBtn');

    const licensedCb = document.getElementById('licensed');



    // Enable submit only if checked

    licensedCb.addEventListener('change', () => submitBtn.disabled = !licensedCb.checked);



    function showStatus(ok, msg) {

      statusEl.classList.remove('hidden');

      statusEl.style.color = ok ? '#8ef5a7' : '#ff8a8a';

      statusEl.textContent = (ok ? '✅ ' : '❌ ') + msg;

    }



    formEl.addEventListener('submit', async (e) => {

      e.preventDefault();

      showStatus(true, 'Submitting...');

      submitBtn.disabled = true;

      submitBtn.textContent = 'Submitting...';



      const trap = formEl.querySelector('[name="company_url"]');

      if (trap && trap.value) { showStatus(false, 'Spam blocked'); return; }



      const data = {

        fullName: formEl.fullName.value.trim(),

        company: formEl.company.value.trim(),

        email: formEl.email.value.trim(),

        phone: formEl.phone.value.trim(),

        city: formEl.city.value.trim(),

        state: formEl.state.value.trim(),

        zip: formEl.zip.value.trim(),

        years: formEl.years.value.trim(),

        notes: formEl.notes.value.trim(),

        licensed: licensedCb.checked

      };



      try {

        const res = await fetch(SCRIPT_URL, {

          method: 'POST',

          headers: { 'Content-Type': 'application/json' },

          body: JSON.stringify(data)

        });

        const json = await res.json().catch(()=>({}));

        if (res.ok && (json.ok || json.result === 'success')) {

          formEl.reset();

          licensedCb.checked = false;

          submitBtn.disabled = true;

          submitBtn.textContent = 'Request Onboarding';

          showStatus(true, 'Submitted successfully. We will contact you soon.');

        } else {

          throw new Error(json.error || 'Server error');

        }

      } catch (err) {

        console.error(err);

        showStatus(false, err.message || 'Error');

        submitBtn.disabled = false;

        submitBtn.textContent = 'Request Onboarding';

      }

    });

  </script>

</body>

</html>
