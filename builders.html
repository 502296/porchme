<!DOCTYPE html>

<html lang="en">

<head>

  <meta charset="utf-8" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Builder Portal – PorchMe</title>

  <link rel="stylesheet" href="style.css?v=9" />

</head>

<body>

  <div class="topline"></div>



  <nav class="nav">

    <div class="wrap">

      <a class="brand" href="index.html">

        <img src="image/porchme_logo_silver.png" class="royal-logo" alt="PorchMe" />

      </a>

      <button class="nav-toggle" aria-label="Menu">☰</button>

      <div class="nav-links">

        <a class="navlink" href="index.html#expertise">Design Expertise</a>

        <a class="navlink" href="gallery.html">Gallery</a>

        <a class="btn btn-gold" href="book.html">Book a Visit</a>

      </div>

    </div>

  </nav>



  <section class="section">

    <div class="wrap">

      <div class="card">

        <h2>Builder Portal</h2>

        <p class="muted">Materials for licensed builders partnering with PorchMe.</p>



        <div class="btn-row" style="margin-top:12px">

          <a class="btn btn-outline" href="files/Builder_Guide.pdf" target="_blank" rel="noopener">Download Builder Guide (PDF)</a>

          <a class="btn btn-outline" href="files/Standard_Specs.pdf" target="_blank" rel="noopener">Standard Specs (PDF)</a>

        </div>



        <hr class="divider" />



        <h3 class="h3">Request Onboarding</h3>

        <p class="muted">Interested in partnering with PorchMe? Complete the form below to join our builder network.</p>



        <!-- FORM (JSON POST) -->

        <form id="builder-form" class="form form--grid" autocomplete="on" novalidate>

          <!-- Honeypot -->

          <input type="text" name="company_url" autocomplete="off" tabindex="-1" class="honeypot" />



          <div class="form__item">

            <label class="form__label">Full Name <span class="req">*</span></label>

            <input class="form__control" name="fullName" required placeholder="Your name" />

          </div>



          <div class="form__item">

            <label class="form__label">Company (optional)</label>

            <input class="form__control" name="company" placeholder="Company name" />

          </div>



          <div class="form__item">

            <label class="form__label">Email <span class="req">*</span></label>

            <input class="form__control" type="email" name="email" required placeholder="you@example.com" />

          </div>



          <div class="form__item">

            <label class="form__label">Phone <span class="req">*</span></label>

            <input class="form__control" type="tel" name="phone" required placeholder="(502) 123-4567" />

          </div>



          <div class="form__item">

            <label class="form__label">Work Area (City) <span class="req">*</span></label>

            <input class="form__control" name="city" required placeholder="Louisville" />

          </div>



          <div class="form__item">

            <label class="form__label">State (e.g., KY) <span class="req">*</span></label>

            <input class="form__control" name="state" required placeholder="KY" />

          </div>



          <div class="form__item">

            <label class="form__label">ZIP Code <span class="req">*</span></label>

            <input class="form__control" name="zip" required placeholder="40218" />

          </div>



          <div class="form__item">

            <label class="form__label">Years of Experience <span class="req">*</span></label>

            <input class="form__control" name="years" required placeholder="e.g., 8" />

          </div>



          <div class="form__item">

            <label class="form__label">License / Insurance (PDF/JPG/PNG) – optional</label>

            <input class="form__control form__control--file" name="license" type="file" multiple accept=".pdf,.jpg,.jpeg,.png" />

            <small class="muted">Files are not uploaded in this version; we’ll enable uploads next.</small>

          </div>



          <div class="form__item form__item--span">

            <label class="form__label">Notes (optional)</label>

            <textarea class="form__control" name="notes" rows="4" placeholder="Tell us about specialties, crew size, coverage area…"></textarea>

          </div>



          <label class="check form__item--span">

            <input type="checkbox" id="licensed" name="licensed" required />

            <span>I confirm I’m a licensed/insured contractor and agree to be contacted by PorchMe.</span>

          </label>



          <div class="actions form__item--span">

            <button id="submitBtn" class="btn btn-gold" type="submit" disabled>Request Onboarding</button>

            <button class="btn btn-quiet" type="reset">Clear</button>

          </div>



          <p id="builder-success" class="status muted hidden"></p>

        </form>

      </div>

    </div>

  </section>



  <footer class="footer">

    <div class="wrap">

      <div class="fbrand">

        <img src="image/porchme_logo_silver.png" alt="PorchMe" />

        <strong>PorchMe</strong>

      </div>

      <div class="copy">© 2025 PorchMe. All rights reserved.</div>

    </div>

  </footer>



  <!-- ===== JS ===== -->

  <script>

    // === CONFIG ===

    const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxL9sAVFSFMwz675dd7UN1w3IlzxWaE71oWsbe8WLjmrvv_5zaOEBk1JDe-5rW-NPI/exec';



    // Elements

    const formEl     = document.getElementById('builder-form');

    const statusEl   = document.getElementById('builder-success');

    const submitBtn  = document.getElementById('submitBtn');

    const licensedCb = document.getElementById('licensed');



    // Toggle submit by license checkbox

    const setSubmitEnabled = () => (submitBtn.disabled = !licensedCb.checked);

    setSubmitEnabled();

    licensedCb.addEventListener('change', setSubmitEnabled);



    // Mobile menu toggle

    const toggle = document.querySelector('.nav-toggle');

    const links  = document.querySelector('.nav-links');

    if (toggle && links) toggle.addEventListener('click', () => links.classList.toggle('open'));



    // Utility: show status

    function showStatus(ok, msg) {

      statusEl.classList.remove('hidden');

      statusEl.style.color = ok ? '#8ef5a7' : '#ff8a8a';

      statusEl.textContent = (ok ? '✅ ' : '❌ ') + msg;

    }



    // Submit handler (JSON POST)

    formEl.addEventListener('submit', async (e) => {

      e.preventDefault();

      showStatus(true, 'Submitting...');

      submitBtn.disabled = true;

      submitBtn.textContent = 'Submitting...';



      // Honeypot

      const trap = formEl.querySelector('[name="company_url"]');

      if (trap && trap.value) { showStatus(false, 'Blocked (spam)'); return; }



      // Collect data

      const data = {

        fullName: formEl.fullName.value.trim(),

        company:  formEl.company.value.trim(),

        email:    formEl.email.value.trim(),

        phone:    formEl.phone.value.trim(),

        city:     formEl.city.value.trim(),

        state:    formEl.state.value.trim(),

        zip:      formEl.zip.value.trim(),

        years:    formEl.years.value.trim(),

        notes:    formEl.notes.value.trim(),

        licensed: licensedCb.checked === true

      };



      try {

        const res  = await fetch(SCRIPT_URL, {

          method: 'POST',

          headers: { 'Content-Type': 'application/json' },

          body: JSON.stringify(data)

        });



        const json = await res.json().catch(() => ({}));



        if (res.ok && (json.ok === true || json.result === 'success')) {

          formEl.reset();

          licensedCb.checked = false;

          setSubmitEnabled();

          submitBtn.textContent = 'Request Onboarding';

          showStatus(true, 'Submitted successfully. We will contact you soon.');

        } else {

          const reason = json.error || json.message || ('Server error ' + res.status);

          throw new Error(reason);

        }

      } catch (err) {

        console.error('[Submission error]', err);

        showStatus(false, err.message || String(err));

        submitBtn.disabled = false;

        submitBtn.textContent = 'Request Onboarding';

      }

    });

  </script>

</body>

</html>
