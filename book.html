<!DOCTYPE html>

<html lang="en">

<head>

  <meta charset="utf-8" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>PorchMe – Book a Visit</title>



  <!-- Styles -->

  <link rel="stylesheet" href="style.css?v=7" />

  <link rel="icon" type="image/png" href="image/favicon.png?v=7" />

</head>

<body>

  <div class="topline"></div>



  <!-- Nav -->

  <nav class="nav">

    <div class="wrap">

      <a class="brand" href="index.html">

        <img src="image/porchme_logo_silver.svg?v=7" class="royal-logo" alt="PorchMe" />

        <span class="wordmark">PorchMe</span>

      </a>



      <div class="nav-links" id="navLinks">

        <a href="index.html#philosophy">Design Ethos</a>

        <a href="index.html#process">Project Roadmap</a>

        <a href="index.html#gallery-section">Gallery</a>

        <a href="builders.html" class="btn btn-outline nav-cta">For Builders</a>

      </div>



      <button class="nav-toggle" aria-label="Toggle menu" aria-expanded="false" aria-controls="navLinks">☰</button>

    </div>

  </nav>



  <!-- Hero -->

  <header class="hero hero-blueprint">

    <div class="wrap hero-inner">

      <h1 class="hero-title">Book a Visit</h1>

      <p class="hero-subtitle">

        Schedule an on-site review so we can evaluate feasibility and style fit for your porch.

      </p>

    </div>

  </header>



  <!-- Booking Form -->

  <section class="section">

    <div class="wrap" style="max-width:820px;">

      <div class="note-card" style="margin-bottom:1rem;">

        <strong>Visit Fee:</strong> $150 (Louisville Area). Applied toward design if you proceed.

      </div>



      <form class="pm-form" id="bookingForm">

        <!-- Honeypot (spam trap) -->

        <input type="text" name="website" style="position:absolute;left:-9999px;opacity:0" tabindex="-1" autocomplete="off">



        <div class="grid2">

          <label>Full Name

            <input name="fullName" type="text" required>

          </label>

          <label>Email

            <input name="email" type="email" required>

          </label>

        </div>



        <div class="grid2">

          <label>Phone

            <input name="phone" type="tel" required>

          </label>

          <label>Address

            <input name="address" type="text" required>

          </label>

        </div>



        <div class="grid2">

          <label>City

            <input name="city" type="text" required>

          </label>

          <label>ZIP Code

            <input name="zip" type="text" required>

          </label>

        </div>



        <div class="grid2">

          <label>Preferred Date

            <input name="date" type="date" required>

          </label>

          <label>Preferred Time

            <input name="time" type="time" required>

          </label>

        </div>



        <label>Notes

          <textarea name="notes" rows="4" placeholder="Tell us what you envision (style, size, materials)…"></textarea>

        </label>



        <div class="hero-actions" style="margin-top:1rem;">

          <button class="btn btn-gold" type="submit" id="submitBtn">Submit Request</button>

          <a href="index.html#process" class="btn btn-outline">Explore the Roadmap</a>

        </div>



        <p id="formMsg" class="muted" style="margin-top:.6rem;"></p>

      </form>

    </div>

  </section>



  <!-- Footer -->

  <footer class="footer">

    <div class="wrap">

      <div class="fbrand">

        <img src="image/porchme_logo_silver.svg?v=7" alt="PorchMe" />

        <span>PorchMe</span>

      </div>

      <div class="fnav">

        <a href="index.html#philosophy">Design Ethos</a>

        <a href="index.html#process">Project Roadmap</a>

        <a href="index.html#gallery-section">Gallery</a>

        <a href="builders.html">Builder Portal</a>

      </div>

      <p class="copy">© <span id="year"></span> PorchMe. All rights reserved.</p>

    </div>

  </footer>



  <!-- Scripts -->

  <script>

    // Year

    document.getElementById('year').textContent = new Date().getFullYear();



    // Mobile nav

    const navBtn = document.querySelector('.nav-toggle');

    const navLinks = document.querySelector('.nav-links');

    if (navBtn && navLinks){

      navBtn.addEventListener('click', ()=>{

        const open = navLinks.classList.toggle('open');

        navBtn.setAttribute('aria-expanded', open ? 'true' : 'false');

      });

    }



    // ===== Submit to Google Apps Script and redirect to Thank You =====

    const BOOKING_ENDPOINT = 'https://script.google.com/macros/s/AKfycbyIfJT7FpTSi9ix01cC6QDbmgOehgKE_S9Lj0DN0kov2-EyblyNmonw-F5HJB64Vis3/exec';



    const form = document.getElementById('bookingForm');

    const msg  = document.getElementById('formMsg');

    const btn  = document.getElementById('submitBtn');



    form.addEventListener('submit', async (e) => {

      e.preventDefault();

      msg.textContent = '';

      btn.disabled = true; btn.textContent = 'Sending…';



      const f = new FormData(form);



      // Block bots via honeypot

      if (f.get('website')) {

        msg.textContent = 'Submission blocked (spam detected).';

        btn.disabled = false; btn.textContent = 'Submit Request';

        return;

      }



      const payload = {

        fullName: f.get('fullName'),

        email:    f.get('email'),

        phone:    f.get('phone'),

        address:  f.get('address'),

        city:     f.get('city'),

        zip:      f.get('zip'),

        date:     f.get('date'),

        time:     f.get('time'),

        notes:    f.get('notes')

      };



      try {

        await fetch(BOOKING_ENDPOINT, {

          method: 'POST',

          mode: 'no-cors',

          headers: { 'Content-Type': 'application/json' },

          body: JSON.stringify(payload)

        });



        // Redirect to Thank You page

        window.location.href = 'thank-you.html';

      } catch (err) {

        msg.textContent = 'Something went wrong. Please try again or email us.';

        btn.disabled = false; btn.textContent = 'Submit Request';

      }

    });

  </script>

</body>

</html>
